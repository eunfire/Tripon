<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&display=swap"
	rel="stylesheet">
	<link rel="stylesheet" th:href="@{/css/nav.css}">
	<link rel="stylesheet" th:href="@{/css/footer.css}">
	<link rel="stylesheet" th:href="@{/css/style.css}"/>
<script src="./js/navbar.js" defer></script>
<title>게시물 상세 페이지</title>
</head>

<body>
<th:block th:insert="~{header :: header}">Header</th:block>
	<div
		style="display: flex; flex-direction: column; min-height: 100vh; min-width: 1750px;">
		<!--! 사이드바 -->
		<div style="flex: 1 1 0%">
			<div style="margin-top: 25px; display: flex; justify-content: center">
				<section style="position: relative">
					<div class="main-wrapper">
						<div class="view_body_wrap">
							<div class="board_title">
								<h1>국내 여행</h1>
								<div class="back-to-board-wrapper" onclick="history.back()">
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
										viewBox="0 0 24 24">
                <path
											d="M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z" />
              </svg>
									<h1>정보/뉴스</h1>
								</div>
							</div>
							<main class="main">
								<div class="board_view_wrap">
									<div class="board_view">
										<div class="title" th:text="${post.title}"></div>
										<div class="info2">
											<div class="info2_left">
												<dl>
													<dt>여행 기간</dt>
													<dd th:text="${post.tStart} + ' ~ ' + ${post.tEnd}"></dd>
												</dl>
												<dl>
													<dt>모집 인원</dt>
													<dd>3명</dd>
												</dl>
											</div>

											<div class="info2_right">
												<dl>
													<dt><span th:text="${post.memId}"></span></dt>
												</dl>

												<dl>
													<dt><span th:text="${#temporals.format(post.createdTime, 'yyyy.MM.dd')}"></span></dt>

												</dl>

												<dl>
													<dt><span th:text="${post.views}"></span></dt>
												</dl>
											</div>
										</div>

										<div class="cont" th:text="${post.content}"></div>
									</div>
								</div>
								<div class="post-actions">
									<button class="editButton" id="editButton">
										<a th:href="@{'/Community/post/' + ${post.boardId} + '/edit'}">수정</a>
									</button>

									<!-- 게시글 삭제 -->
									<form id="deleteForm" th:action="@{/Community/post/{postId}/delete(postId=${post.boardId})}" method="post">
										<button class="deleteButton" id="deleteButton" type="submit" onclick="return confirm('정말로 이 게시글을 삭제하시겠습니까?')">삭제</button>
									</form>
									<button class="goBackButton" id="goBackButton">목록</button>
								</div>
							</main>

							<div class="Reply_div"></div>

							<div id="cmtPosition" aria-live="polite">
								<div class="comment_header_bar">
									<i class="far fa-comment-dots"> </i>
									<h3>댓글</h3>
								</div>
							</div>

							<!-- 댓글 목록을 보여주는 부분 -->
							<ul th:each="comment : ${comments}">
								<li>
									<span th:text="${comment.nick}"></span>
									<span th:text="${comment.bcDate}"></span>
									<p th:text="${comment.bcContent}"></p>
								</li>
							</ul>

							<!-- 댓글 입력 폼 -->
							<form th:action="@{/Community/post/{postId}/comments(postId=${post.boardId})}" method="post">
								<textarea name="bcContent" placeholder="댓글을 입력해주세요."></textarea>
								<button type="submit">댓글 작성</button>
							</form>
						</div>
					</div>
				</section>
			</div>
		</div>
		<div class="like-section">
			<p>좋아요 수: <span th:text="${likeCount}"></span></p>
			<form th:action="@{/Community/post/{postId}/like(postId=${post.boardId})}" method="post">
				<!-- 아래의 hidden input을 추가하여 boardId를 전달 -->
				<input type="hidden" name="boardId" th:value="${post.boardId}" />
				<input type="hidden" name="memId" th:value="${#authentication.name}">
				<button type="submit">좋아요</button>
			</form>
		</div>
		<footer>
			<div class="container_footer">
				<div class="logo_line">
					<span class="logo2"> <img th:src="@{/img/logo-img2.png}"/>
					</span>
				</div>

				<div class="menu_line">
					<ul class="menus">
						<span>Menu</span>
						<li><a href="notice-board.html">공지사항</a></li>
						<li><a href="local-information-board.html">국내여행</a></li>
						<li><a href="world-information-board.html">해외여행</a></li>
						<li><a href="free-board.html">커뮤니티</a></li>
					</ul>
				</div>

				<div class="address_line">
					<ul class="address">
						<span>Contact</span>
						<li>
							<p>대표번호 : 010-1234-5678</p>
						</li>
						<li>
							<p>팩스 : 070-2345-6789</p>
						</li>
						<li>
							<p>이메일 : info@tripon.com</p>
						</li>
					</ul>
				</div>
			</div>

			<div class="copyright">
				<p>Copyright © TRIPON Inc. All Rights Reserved.</p>
			</div>
		</footer>
	</div>
</body>
</html>
